%% CLI Mode Routing
%% Shows how CLI flags determine which handler is invoked

flowchart TD
    START[Parse CLI Flags] --> VERSION{--version?}
    VERSION -->|Yes| V_OUT[Print version<br/>and exit]
    VERSION -->|No| HELP_FLAG{--help?}

    HELP_FLAG -->|Yes| H_OUT[Print usage<br/>and exit]
    HELP_FLAG -->|No| LINT{--lint?}

    LINT -->|Yes| FIX{--fix?}
    FIX -->|Yes| LINT_FIX[LintService<br/>Check + Apply fixes]
    FIX -->|No| LINT_ONLY[LintService<br/>Check only]

    LINT -->|No| REMOVE{--remove-help?}

    REMOVE -->|Yes| RM_HANDLER[RemoveService<br/>Clean up help artifacts]
    REMOVE -->|No| TARGET_FLAG{--target set?}

    TARGET_FLAG -->|Yes| DETAIL[Render detailed<br/>target help to stdout]
    TARGET_FLAG -->|No| OUTPUT{--output -?}

    OUTPUT -->|Yes| STDOUT[Render full help<br/>to stdout]
    OUTPUT -->|No| DEFAULT[Default Mode<br/>Generate static help file<br/>./make/help.mk]

    style START fill:#e3f2fd
    style DEFAULT fill:#c8e6c9
    style RM_HANDLER fill:#ffcdd2
    style LINT_FIX fill:#fff9c4
    style LINT_ONLY fill:#fff9c4
